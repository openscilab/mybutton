(this.webpackJsonpmybutton=this.webpackJsonpmybutton||[]).push([[7],{353:function(e,t,c){"use strict";var o=c(0);const s=()=>"undefined"!==typeof document&&document.hasFocus();t.a=()=>{const[e,t]=Object(o.useState)(s),[c,i]=Object(o.useState)({width:window.innerWidth,height:window.innerHeight}),n=Object(o.useRef)({focused:e,windowSize:c}),r=()=>{i({width:window.innerWidth,height:window.innerHeight})};return Object(o.useEffect)((()=>{t(s());const e=()=>t(!0),c=()=>t(!1);return window.addEventListener("focus",e),window.addEventListener("blur",c),()=>{window.removeEventListener("focus",e),window.removeEventListener("blur",c)}}),[]),Object(o.useEffect)((()=>(r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r))),[]),Object(o.useEffect)((()=>{n.current={focused:e,windowSize:c}}),[e,c]),{winRef:n,size:c,hasFocus:e,isMobile:(null===c||void 0===c?void 0:c.width)<481,isDesktop:(null===c||void 0===c?void 0:c.width)>992}}},468:function(e,t,c){},693:function(e,t,c){"use strict";c.r(t);c(468);var o=c(0),s=c(695),i=c(4);var n=e=>{const[t,c]=Object(o.useState)(e.checked||!1);return Object(i.jsxs)(s.a,{className:"service-radio",checked:t,onClick:()=>{t?e.onRemove(e.title):e.onSelect(e.title),c(!t)},children:[Object(i.jsx)("div",{className:"service-logo",style:{backgroundColor:e.bg},children:Object(i.jsx)("img",{src:e.icon,alt:e.title})}),Object(i.jsx)("h2",{children:e.title})]})},r=c(353);var a={array:e=>Array.isArray(e),date:e=>e instanceof Date,blob:e=>e instanceof Blob,string:e=>"string"===typeof e,number:e=>"number"===typeof e,boolean:e=>"boolean"===typeof e,object_only:e=>"object"===typeof e,function:e=>"function"===typeof e,object:e=>"object"===typeof e&&!Array.isArray(e)};const l=function(){for(var e=arguments.length,t=new Array(e),c=0;c<e;c++)t[c]=arguments[c];const o=JSON.stringify(u(t[0]));return t.every(((e,t)=>0===t||JSON.stringify(u(e))===o))},d=e=>{var t;return Array.isArray(e)?null===(t=[...e||[]])||void 0===t?void 0:t.sort():Object.keys(e||{}).sort().reduce(((t,c)=>(t[c]=e[c],t)),{})},u=e=>{var t;if("object"!==typeof e)return;let c=d(e);return Array.isArray(c)?c.forEach(((e,t)=>"object"===typeof e&&(c[t]=u(e)))):null===(t=Object.entries(c||{}))||void 0===t||t.forEach((e=>{let[t,o]=e;return"object"===typeof o&&(c[t]=u(o||[]))})),c},b=e=>JSON.parse(JSON.stringify(e||{})),h=e=>({set:(t,c)=>{let o=e;const s=a.string(t)?[...null===t||void 0===t?void 0:t.split(".")]:t;for(let e=0;e<s.length;e++){var i,n;const t=null===s||void 0===s?void 0:s[e],r=e===(null===s||void 0===s?void 0:s.length)-1;void 0===(null===(i=o)||void 0===i?void 0:i[t])&&(o[t]={}),r&&(o[t]=c),o=null===(n=o)||void 0===n?void 0:n[t]}return e}});var j,p=c(100),m=c(375),v=c(376),g=c(694),O=c(41),f=c(377),w=c(386),x=c(688);function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var c=arguments[t];for(var o in c)({}).hasOwnProperty.call(c,o)&&(e[o]=c[o])}return e},y.apply(null,arguments)}function k(e,t){let{title:c,titleId:s,...i}=e;return o.createElement("svg",y({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",ref:t,"aria-labelledby":s},i),c?o.createElement("title",{id:s},c):null,j||(j=o.createElement("path",{d:"M64 464H288c8.8 0 16-7.2 16-16V384h48v64c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V224c0-35.3 28.7-64 64-64h64v48H64c-8.8 0-16 7.2-16 16V448c0 8.8 7.2 16 16 16zM224 304H448c8.8 0 16-7.2 16-16V64c0-8.8-7.2-16-16-16H224c-8.8 0-16 7.2-16 16V288c0 8.8 7.2 16 16 16zm-64-16V64c0-35.3 28.7-64 64-64H448c35.3 0 64 28.7 64 64V288c0 35.3-28.7 64-64 64H224c-35.3 0-64-28.7-64-64z"})))}const N=o.forwardRef(k);c.p;var C=c(679),M=c(680),E=c(686),S=c(334),V=c(690),A=c(696),H=c(697);t.default=()=>{const{isMobile:e}=Object(r.a)(),[t,c]=Object(o.useState)(),{set:a,temp:d}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const[c,s]=Object(o.useState)(b(e)),[i,n]=Object(o.useState)(b(e));Object(o.useEffect)((()=>{const t=b(e);l(t,c)||(n(t),s(t))}),t),Object(o.useEffect)((()=>{l(i,c)||n(b(c))}),[c]);const r={data:s,temp:n,ou:{data:(e,t)=>s((c=>h(b(c)).set(e,t))),temp:(e,t)=>n((c=>h(b(c)).set(e,t)))}},a=Object(o.useCallback)((()=>{n(c)}),[e,c]),d=Object(o.useMemo)((()=>!l(c,i)),[c,i]);return{set:Object(o.useMemo)((()=>r),[]),temp:i,data:c,discard:a,isChanged:d}}({url:"",code:"",subject:"",isValid:!0,showCode:!1,openModal:!1,openTooltip:!1,shareMode:"direct"}),[u,j]=Object(o.useState)(["email"]),y=e=>{j([...u,e])},k=e=>{const t=null===u||void 0===u?void 0:u.filter((t=>t!==e));j(t)},z=(e,t)=>"".concat(p.a.FRONT_DOMAIN,"/share/?service=").concat(e,"&subject=").concat(d.subject,"&link=").concat(t),L=()=>{if(!d.url)return void a.ou.temp("isValid",!1);if(0===u.length)return void a.ou.temp("showCode",!1);const e=R(d.url||""),t=T(e).filter((e=>u.includes(e.title))),o=Object(i.jsx)("div",{className:"flex-center",children:t.map(((t,c)=>{const o="direct"===d.shareMode?t.url:z(t.title,e);return Object(i.jsx)("a",{href:o,target:"_blank",rel:"noreferrer",children:Object(i.jsx)("img",{src:t.icon,width:32,height:32,style:{backgroundColor:t.bg,borderRadius:4,paddingLeft:1,paddingRight:1},alt:""})},c)}))});c(o);const s="\t<div>\n\t\t\t".concat(t.map((t=>{const c="direct"===d.shareMode?t.url:z(t.title,e);return'<a href="'.concat(c,'" target="_blank"><img src="').concat(t.iconUrl,'" width="32" height="32" style="background-color:').concat(t.bg,'; border-radius:4px"/></a>')})).join("\n\t\t\t"),"\n\t</div>");a.ou.temp("code",s),a.ou.temp("showCode",!0)},R=e=>e.includes("://")?e:"http://".concat(e),T=e=>[{title:"email",icon:m.a,iconUrl:"https://github.com/openscilab/mybutton/raw/main/src/Assets/icons/services/email.svg",bg:"#888990",url:"mailto:?subject=".concat(d.subject,"&body=").concat(e)},{title:"gmail",icon:v.a,iconUrl:"https://github.com/openscilab/mybutton/raw/main/src/Assets/icons/services/gmail.svg",bg:"#EA4335",url:"https://mail.google.com/mail/u/0/?ui=2&fs=1&tf=cm&su=".concat(d.subject,"&body=").concat(e)},{title:"telegram",icon:f.a,iconUrl:"https://github.com/openscilab/mybutton/raw/main/src/Assets/icons/services/telegram.svg",bg:"#2CA5E0",url:"https://telegram.me/share/url?url=".concat(e,"&text=").concat(d.subject)}];return Object(o.useEffect)((()=>{d.showCode&&L()}),[u]),Object(i.jsxs)("div",{className:"get-button-layout",children:[Object(i.jsxs)("div",{className:"get-button-container",children:[Object(i.jsx)("h1",{children:"Get share button code"}),Object(i.jsxs)("div",{className:"input-container",children:[Object(i.jsx)(w.a,{label:"Link",defaultValue:d.url,isValid:d.isValid,errorMessage:"required",onChange:e=>{d.isValid||a.ou.temp("isValid",!0),a.ou.temp("url",e.target.value)},placeholder:"https://www.example.com"}),Object(i.jsx)(w.a,{label:"Subject",onChange:e=>{a.ou.temp("subject",e.target.value)},defaultValue:d.subject,placeholder:"Subject"})]}),Object(i.jsx)(C.a,{placement:"top",controlId:"control-id-hover",trigger:"hover",speaker:Object(i.jsx)(M.a,{className:"share-mode-tooltip",children:"Choose to share your link directly on the selected services or do it through MyButton website."}),children:Object(i.jsx)("div",{className:"radiogroup-whisper",children:Object(i.jsxs)(E.a,{name:"radio-group-inline-picker-label",inline:!0,className:"mode-picker",appearance:"picker",defaultValue:d.shareMode,onChange:e=>a.ou.temp("shareMode",e),children:[Object(i.jsx)("label",{className:"box-label",children:"Sharing Mode: "}),Object(i.jsx)(s.a,{value:"direct",children:"Direct"}),Object(i.jsx)(s.a,{value:"indirect",children:"Indirect"})]})})}),Object(i.jsxs)("div",{className:"buttons",children:[Object(i.jsx)(S.a,{className:"choose",onClick:()=>a.ou.temp("openModal",!0),children:"Choose Services"}),Object(i.jsx)(C.a,{disabled:0!==u.length,placement:e?"bottom":"top",trigger:"click",speaker:Object(i.jsx)(M.a,{className:"err-tooltip",children:"Please choose services!"}),children:Object(i.jsx)(S.a,{className:"get-code",onClick:L,children:"Get Code"})})]}),d.showCode&&Object(i.jsxs)("div",{className:"code-container",children:[Object(i.jsx)(g.a,{language:"xml",style:x.a,children:d.code}),Object(i.jsx)(C.a,{className:"copy-whisper",onClick:()=>{d.openTooltip||a.ou.temp("openTooltip",!0)},onOpen:()=>{setTimeout((()=>{a.ou.temp("openTooltip",!1)}),1500)},open:d.openTooltip,placement:"top",trigger:"click",speaker:Object(i.jsx)(M.a,{className:"copy-tooltip",children:"Copied!"}),children:Object(i.jsx)("div",{className:"copy-icon",children:Object(i.jsx)(N,{className:"icon",onClick:async()=>{await Object(O.c)(d.code)}})})}),Object(i.jsx)("div",{className:"services-button",children:t})]})]}),Object(i.jsxs)(V.a,{open:d.openModal,size:"sm",onClose:()=>a.ou.temp("openModal",!1),backdrop:!0,className:"choose-services-modal",children:[Object(i.jsx)(V.a.Header,{children:"Choose services"}),Object(i.jsx)(V.a.Body,{children:Object(i.jsx)("div",{className:"services-list",children:Object(i.jsx)(A.a,{children:T().map(((e,t)=>{const c=u.includes(e.title);return Object(i.jsx)(H.a,{xs:12,sm:8,children:Object(i.jsx)(n,{...e,checked:c,onSelect:y,onRemove:k})},t)}))})})}),Object(i.jsx)(V.a.Footer,{children:Object(i.jsx)(S.a,{onClick:()=>a.ou.temp("openModal",!1),children:"Done"})})]})]})}}}]);
//# sourceMappingURL=7.5ef5cebf.chunk.js.map